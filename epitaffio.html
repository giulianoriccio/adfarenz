<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Epitaffio</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Rouge+Script&display=swap"
            rel="stylesheet"
        />
        <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
        <style>
            body,
            html {
                margin: 0;
                padding: 0;
            }

            #i {
                --raw-width: 1200;
                --width: calc(var(--raw-width) * 1px);
                --raw-height: 774;
                --height: calc(var(--raw-height) * 1px);
                --raw-font-size: 64;
                --font-size: calc(var(--raw-font-size) * 1px);
                --raw-padding-right: 50;
                --padding-right: calc(var(--raw-padding-right) * 1px);
                --ratio: calc(min(var(--width), 100vw) / var(--raw-width));
                box-sizing: border-box;
                display: flex;
                flex-flow: column;
                justify-content: center;
                align-items: flex-end;
                background: url(bg.jpg) #fff no-repeat bottom left;
                background-size: contain;
                width: calc(var(--ratio) * var(--raw-width));
                height: calc(var(--ratio) * var(--raw-height));
                padding-right: calc(var(--ratio) * var(--raw-padding-right));
                color: #000;
                font-family: "Rouge Script", cursive;
                font-size: calc(var(--ratio) * var(--raw-font-size));
                text-align: right;
            }

            .save #i {
                width: var(--width);
                height: var(--height);
                padding-right: var(--padding-right);
                font-size: var(--font-size);
            }

            .save img {
                max-width: 100%;
            }

            #t {
                position: relative;
                quotes: "\201C""\201D""\2018""\2019";
                max-width: 55%;
                min-width: 30%;
                padding: 0;
                color: #000;
                text-align: left;
                word-break: break-all;
                white-space: pre-wrap;
            }

            #t::before {
                content: open-quote;
                position: absolute;
                top: 0;
                left: -1ch;
            }

            #t::after {
                content: attr(data-replicated-value) close-quote;
            }

            #t > textarea {
                box-sizing: border-box;
                overflow: hidden;
                resize: none;
                position: absolute;
                top: 0;
                left: 0;
                height: 100%;
                width: 100%;
                margin: 0;
                padding: 0;
                border: 0;
                outline: 0;
                background: transparent;
                color: transparent;
                caret-color: #000000;
                font-family: inherit;
                font-size: inherit;
            }

            button {
                cursor: pointer;
                position: absolute;
                top: 20px;
                left: 20px;
                border: 0;
                background: transparent;
                font-size: 32px;
            }
        </style>
    </head>
    <body onload="var t=document.querySelector('textarea');document.getElementById('t').dataset.replicatedValue=t.value;t.focus();t.setSelectionRange(0,t.value.length);">
        <div id="i">
            <div id="t"><textarea name="text" id="text" oninput="this.parentNode.dataset.replicatedValue=this.value">Modifica il testo dell'epitaffio</textarea></div>
            <div>- Marco Farina</div>
        </div>
        <button onclick="var b=document.body;b.classList.add('save');html2canvas(document.getElementById('i'),{width:1200}).then(c=>{var i=document.createElement('img');i.src=c.toDataURL();b.innerHTML='';b.appendChild(i);})">ðŸ’¾</button>
    </body>
</html>
